#!/bin/bash

# This script sets the background, using pywal to set a terminal colorscheme,or otherwise
# using Xresources.

#	Usage: 
#		`setbg [ -s, --no-scheme ] [ -i, --input="path/to/img" ]`

TEMP=$(getopt -o 'si:' --long 'no-scheme,input:' -- "$@" )

eval set -- "$TEMP"
unset TEMP

scheme=true

while true; do
	case "$1" in
		'-s'|'--no-scheme')
			scheme=false
			shift
			continue
		;;
		'-i'|'--input')
			cp "$2" ~/.config/wall.png && notify-send -i "$HOME/.config/wall.png" "Wallpaper changed." && [ $scheme ] && wal -i ~/.config/wall.png && wal -c || gsettings set org.gnome.desktop.background picture-uri file://$XDG_CONFIG_HOME/wall.png && xrdb -load $XDG_CONFIG_HOME/Xresources
			shift 2
			continue
		;;
		'--')
			shift
			break
		;;
	esac
done
